#!/bin/bash

# A simple script to perform first initialisation
cd ~/.aen/rest-gateway

# Check whether the npm rebuild command has been run yet because, there is a
# high chance zeromq will need to be recompiled
if [ ! -e ~/.aen/var/rest_gateway_built ]; then
  npm rebuild
  echo "OK" > ~/.aen/var/rest_gateway_built
fi

sleep 5
if ! pgrep "restnode.js" > /dev/null
then
    npm start ~/.aen/resources/rest.json
fi
